<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/mvp.css@1.7.4/mvp.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <a href="../index.html">Go Back</a>
    <br>
    <br>
    <b>Lesson 3</b> || web10 messaging app
    <br><br>
    <b>messaging + P2P webrtc streaming</b>
    <ol>
        <li>make a new repl html, css, js project</li>
        <li>copy all of the <a target="_blank" href="https://github.com/jacoby149/lessons/tree/main/web10-lesson3">lesson 3 files into the
                repl</a>
        </li>
        <li>add your institutions provider, app store registry server, and webRTC server.</li>
        <li>do this by setting the variables web10_authenticator web10_registrar, and web10_webRTC </li>
        <li>however, you will need to let others create mail to your inbox</li>
        <li>to do so, in script.js, uncomment out the whitelist create entry</li>
        <li>also, add the url of your github pages site and replit url to the list of cross_origins.</i></li>
        <li>as a user, if you log in and approve, you should be able to write messages!</li>
        <li>try sending a message to a classmate. your will need to reload the page to see incoming messages.</li>
        <li>finish the deleteMail function, follow the directions in the comments.</li>
        <li>check that it works!</li>
        <li>we will use webRTC to make it so you won't need to reload the page to see new messages.</li>
        <li>uncomment out the wapi.initP2P line that initializes the P2P functionality. </li>
        <li>it lets people ping you, to tell you to re read your mail</li>
        <li>uncomment out the .then function with wapi.send </li>
        <li>now try sending messages, they should instantly load for your friends.</li>
        <li>on repl, hit the github branch icon <img src="../branch.webp" height="24px" /> , commit, and push
            your
            changes
            to a new repo named web10-lesson3.
        </li>
        <li>Congratulations! you made your first P2P streaming web10 app!</li>
    </ol>

    <br>

    <div class="main">
        <button id="authButton">
            log in
        </button>
        <p id="message">
            app not started
        </p>
        <br>
        <div>
            <div>
                <input class="" id="recipient" placeholder="recipient">
                <input class="" id="web10server" placeholder="web10server" value="api.web10.app">
            </div>
            <div>
                <textarea id="curr" placeholder="write message here"></textarea>
            </div>
            <div>
                <button onclick="createMail(curr.value,recipient.value,web10server.value)">create mail</button>
            </div>
        </div>
        <div id="mailview"></div>
    </div>
</body>

<script src="https://unpkg.com/web10-npm@1.0.8/dist/wapi.js"></script>
<script src="script.js"></script>

</html>